"use strict";(self.webpackChunkfull_stack_news_client=self.webpackChunkfull_stack_news_client||[]).push([[834],{2834:function(n,e,t){t.r(e),t.d(e,{default:function(){return j}});var r=t(1413),a=t(2791),i=t(7689),o=t(9434),u=t(7309),c=t(4096),s=t(1087),l=t(3695),d=t(7075),f=t(3099),p=t(9249),h=t(1638),v=t(1098),Z=t(3125),w=t(9966),x=t(1752),g=t(2622),y=t(184),k=function(n){var e,t,r=(0,o.I0)(),a=(0,o.v9)((function(n){return n.user})),i=(0,Z.Z)().width;return(0,y.jsx)(d.Z,{title:n.title,extra:(0,y.jsxs)(f.Z,{size:"middle",children:[(0,y.jsx)(u.Z,{type:"primary",icon:i<=700?(0,y.jsx)(w.Z,{}):null,children:(0,y.jsx)(s.rU,{to:"/main/news/".concat((0,v.Z)(n.title),"_").concat(n.ID),children:i>700?"Detail":null})}),(0,y.jsx)(u.Z,{disabled:a&&(null===(e=a.data)||void 0===e?void 0:e.id)!==n.userID,icon:i<=700?(0,y.jsx)(x.Z,{}):null,children:(0,y.jsx)(s.rU,{to:"/edit/".concat(n.ID),children:i>700?"Edit":null})}),(0,y.jsx)(p.Z,{title:"Are you sure to delete this news?",onConfirm:function(){return e=n.ID,r((0,h.kN)(e)),void l.ZP.success("Deleted News with ID "+e);var e},onCancel:function(n){l.ZP.error("Click on No")},children:(0,y.jsx)(u.Z,{disabled:a&&(null===(t=a.data)||void 0===t?void 0:t.id)!==n.userID,danger:!0,icon:i<=700?(0,y.jsx)(g.Z,{}):null,children:i>700?"Delete":null})})]}),style:{width:"100%"},children:(0,y.jsx)("p",{children:n.category})})},j=function(){var n=(0,o.v9)((function(n){return n.news})),e=((0,o.v9)((function(n){return n.user})),(0,i.UO)().type),t=(0,o.I0)();(0,a.useEffect)((function(){t(h.MK),t((0,h.aL)(e))}),[e]);(0,a.useEffect)((function(){console.log(n)}));return(0,y.jsxs)("div",{children:[(0,y.jsxs)("div",{className:"container",children:[(0,y.jsx)("h2",{children:"All News"}),(0,y.jsx)(u.Z,{style:{marginLeft:"auto"},onClick:function(){t((0,h.TX)())},type:"primary",children:"Log out"})]}),n.result&&n.totalLength>0?(0,y.jsxs)(y.Fragment,{children:[n.result.map((function(n){return(0,y.jsx)(k,(0,r.Z)({type:e},n),n.ID)})),(0,y.jsx)("br",{}),(0,y.jsx)(c.Z,{onChange:function(n,r){t((0,h.aL)(e,r,n))},defaultPageSize:5,defaultCurrent:1,total:n.totalLength})]}):n.result&&0===n.totalLength?(0,y.jsx)("h3",{children:'There is no news to show :(. Please go to "Create News" to make one.'}):(0,y.jsx)(y.Fragment,{children:"Loading..."})]})}},1638:function(n,e,t){t.d(e,{JR:function(){return l},MK:function(){return Z},TX:function(){return f},aL:function(){return p},f_:function(){return x},hr:function(){return h},kN:function(){return g},pE:function(){return v},pH:function(){return d},yQ:function(){return w}});var r=t(4165),a=t(1413),i=t(5861),o=t(4569),u=t.n(o),c=t(8329),s=function(){return u().create({baseURL:"https://full-stack-news-backend.herokuapp.com",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(c.Z.get("token")),credentials:"same-origin"}})},l=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i.Z)((0,r.Z)().mark((function t(){var i;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s().post("/user/register",n,{headers:(0,a.Z)({},e)});case 2:return i=t.sent,t.abrupt("return",i);case 4:case"end":return t.stop()}}),t)})))},d=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){var t=(0,i.Z)((0,r.Z)().mark((function t(i){var o;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s().post("/user/login",n,{headers:(0,a.Z)({},e)});case 2:o=t.sent,c.Z.set("token",o.data.token),i({type:"SET_USER",payload:o});case 5:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()},f=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){var t=(0,i.Z)((0,r.Z)().mark((function t(i){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s().post("/user/logout",n,{headers:(0,a.Z)({},e)});case 2:t.sent,c.Z.remove("token"),i({type:"LOGOUT_USER",payload:{}});case 5:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()},p=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return function(){var u=(0,i.Z)((0,r.Z)().mark((function i(u){var c;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,s().get("/news/".concat(n,"?size=").concat(e,"&page=").concat(t),{headers:(0,a.Z)({},o)});case 2:c=r.sent,u({type:"FETCH_NEWS",payload:c.data});case 4:case"end":return r.stop()}}),i)})));return function(n){return u.apply(this,arguments)}}()},h=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){var t=(0,i.Z)((0,r.Z)().mark((function t(i){var o;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s().get("/news/detail/".concat(n),{headers:(0,a.Z)({},e)});case 2:o=t.sent,i({type:"FETCH_NEWS_DETAIL",payload:o.data});case 4:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()},v=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s().get("/categories",{headers:(0,a.Z)({},n)});case 2:i=e.sent,t({type:"FETCH_CATEGORIES",payload:i.data});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},Z=function(){return function(n){n({type:"CLEAR_NEWS",payload:[]})}},w=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){var t=(0,i.Z)((0,r.Z)().mark((function t(i){var o;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s().post("/news/",n,{headers:(0,a.Z)({},e)});case 2:o=t.sent,i({type:"ADD_NEWS",payload:o.data});case 4:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()},x=function(n){var e=n.values,t=n.id,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){var n=(0,i.Z)((0,r.Z)().mark((function n(i){var u;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s().put("/news/".concat(t),e,{headers:(0,a.Z)({},o)});case 2:u=n.sent,i({type:"EDIT_NEWS",payload:u.data});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},g=function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(){var o=(0,i.Z)((0,r.Z)().mark((function i(o){return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,s().delete("/news/".concat(n),{headers:(0,a.Z)({},t)});case 2:o(p(e));case 3:case"end":return r.stop()}}),i)})));return function(n){return o.apply(this,arguments)}}()}},3125:function(n,e,t){var r=t(9439),a=t(2791);e.Z=function(){var n="undefined"===typeof window,e=(0,a.useState)({width:n?1600:window.innerWidth,height:n?800:window.innerHeight}),t=(0,r.Z)(e,2),i=t[0],o=t[1],u=function(){o({width:window.innerWidth,height:window.innerHeight})};return(0,a.useEffect)((function(){return window.addEventListener("resize",u),function(){window.removeEventListener("resize",u)}}),[]),i}}}]);
//# sourceMappingURL=834.7c6d8dd4.chunk.js.map