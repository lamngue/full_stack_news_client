"use strict";(self.webpackChunkfull_stack_news_client=self.webpackChunkfull_stack_news_client||[]).push([[737],{1737:function(e,n,t){t.r(n),t.d(n,{default:function(){return _}});var r=t(1413),a=t(4165),u=t(5861),c=t(9439),o=t(2791),s=t(1801),i=t(6905),p=t(3695),l=t(7075),f=t(7031),d=t(3099),h=t(7309),Z=t(9434),v=t(7689),w=t(1638),y=t(7551),m=t(2443),x=t.n(m),g=t(184),k=s.Z.Option,E={labelCol:{span:4},wrapperCol:{span:18}},C={wrapperCol:{offset:8,span:16}},_=function(e){var n=i.Z.useForm(),t=(0,c.Z)(n,1)[0],m=(0,v.UO)().id,_=!!m,j=(0,o.useState)(""),T=(0,c.Z)(j,2),I=T[0],b=T[1],S=(0,Z.v9)((function(e){return e.user})),D=(0,Z.v9)((function(e){return e.news.newsDetail})),A=(0,Z.v9)((function(e){return e.categories})),N=(0,Z.I0)(),F=(0,v.s0)();(0,o.useEffect)((function(){m&&N((0,w.hr)(m))}),[m]),(0,o.useEffect)((function(){var e;D&&(t.setFieldsValue((e=D,(0,r.Z)((0,r.Z)({},e),{},{category:e.categoryIds}))),b(D.content))}),[D]);var R=function(){var e=(0,u.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.content=I,n.userID=S.data.id,_?(N((0,w.f_)({id:m,values:n})),p.ZP.success("Update completed!")):(N((0,w.yQ)(n)),F("/main/all-post"));case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,g.jsx)(l.Z,{title:_?"Edit News":"Create News",children:(0,g.jsxs)(i.Z,(0,r.Z)((0,r.Z)({},E),{},{form:t,name:"control-hooks",onFinish:R,children:[(0,g.jsx)(i.Z.Item,{name:"title",label:"Title",rules:[{required:!0}],children:(0,g.jsx)(f.Z,{})}),(0,g.jsx)(i.Z.Item,{name:"category",label:"Category",rules:[{required:!0}],children:(0,g.jsx)(s.Z,{mode:"multiple",placeholder:"Select option(s)",allowClear:!0,children:null!==A&&void 0!==A&&A.length?A.map((function(e){return(0,g.jsx)(k,{value:e.ID,children:e.type},e.ID)})):null})}),(0,g.jsx)(i.Z.Item,{name:"content",label:"Content",rules:[{required:!0}],children:(0,g.jsx)(y.CKEditor,{editor:x(),data:I,onChange:function(e,n){var t=n.getData();b(t)}})}),(0,g.jsx)(i.Z.Item,(0,r.Z)((0,r.Z)({},C),{},{children:(0,g.jsxs)(d.Z,{children:[(0,g.jsx)(h.Z,{type:"primary",htmlType:"submit",children:_?"Update":"Create"}),(0,g.jsx)(h.Z,{htmlType:"button",onClick:function(){t.resetFields()},children:"Reset"})]})}))]}))})}},1638:function(e,n,t){t.d(n,{JR:function(){return p},MK:function(){return v},TX:function(){return f},aL:function(){return d},f_:function(){return y},hr:function(){return h},kN:function(){return m},pE:function(){return Z},pH:function(){return l},yQ:function(){return w}});var r=t(4165),a=t(1413),u=t(5861),c=t(4569),o=t.n(c),s=t(8329),i=function(){return o().create({baseURL:"https://full-stack-news-backend.herokuapp.com",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(s.Z.get("token")),credentials:"same-origin"}})},p=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,u.Z)((0,r.Z)().mark((function t(){var u;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i().post("/user/register",e,{headers:(0,a.Z)({},n)});case 2:return u=t.sent,t.abrupt("return",u);case 4:case"end":return t.stop()}}),t)})))},l=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){var t=(0,u.Z)((0,r.Z)().mark((function t(u){var c;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i().post("/user/login",e,{headers:(0,a.Z)({},n)});case 2:c=t.sent,s.Z.set("token",c.data.token),u({type:"SET_USER",payload:c});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},f=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){var t=(0,u.Z)((0,r.Z)().mark((function t(u){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i().post("/user/logout",e,{headers:(0,a.Z)({},n)});case 2:t.sent,s.Z.remove("token"),u({type:"LOGOUT_USER",payload:{}});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},d=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return function(){var o=(0,u.Z)((0,r.Z)().mark((function u(o){var s;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i().get("/news/".concat(e,"?size=").concat(n,"&page=").concat(t),{headers:(0,a.Z)({},c)});case 2:s=r.sent,o({type:"FETCH_NEWS",payload:s.data});case 4:case"end":return r.stop()}}),u)})));return function(e){return o.apply(this,arguments)}}()},h=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){var t=(0,u.Z)((0,r.Z)().mark((function t(u){var c;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i().get("/news/detail/".concat(e),{headers:(0,a.Z)({},n)});case 2:c=t.sent,u({type:"FETCH_NEWS_DETAIL",payload:c.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var n=(0,u.Z)((0,r.Z)().mark((function n(t){var u;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i().get("/categories",{headers:(0,a.Z)({},e)});case 2:u=n.sent,t({type:"FETCH_CATEGORIES",payload:u.data});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},v=function(){return function(e){e({type:"CLEAR_NEWS",payload:[]})}},w=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){var t=(0,u.Z)((0,r.Z)().mark((function t(u){var c;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i().post("/news/",e,{headers:(0,a.Z)({},n)});case 2:c=t.sent,u({type:"ADD_NEWS",payload:c.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},y=function(e){var n=e.values,t=e.id,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){var e=(0,u.Z)((0,r.Z)().mark((function e(u){var o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i().put("/news/".concat(t),n,{headers:(0,a.Z)({},c)});case 2:o=e.sent,u({type:"EDIT_NEWS",payload:o.data});case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},m=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(){var c=(0,u.Z)((0,r.Z)().mark((function u(c){return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i().delete("/news/".concat(e),{headers:(0,a.Z)({},t)});case 2:c(d(n));case 3:case"end":return r.stop()}}),u)})));return function(e){return c.apply(this,arguments)}}()}}}]);
//# sourceMappingURL=737.6f453521.chunk.js.map